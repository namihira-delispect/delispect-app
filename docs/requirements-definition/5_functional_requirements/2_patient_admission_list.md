# 2.患者入院情報一覧表示

## 機能概要
対象患者入院レコードの一覧を表示する機能。

## 前提条件
- 電子カルテシステムと連携されていること
- 患者の入院情報が登録されていること

## 機能要件

### 2.1 一覧表示機能
#### 2.1.1 表示項目
以下の項目を表示する。  
複数回入院するケースも有り、一度の入院で複数回判定する場合もあるので、患者ID、入院日、評価日付でユニークとなる。
ただし、表示するレコードは入院日の最新のものだけを表示する。（入院日が異なる同一患者は表示される）

| 項目名 | 説明 | 備考 |
|-------|------|------|
| ID | 患者ID | 電子カルテ側で採番 |
| 患者情報 | 患者氏名（フリガナ）<br>年齢<br>性別 | |
| 入院日 | 入院日 | YYYY/MM/DD |
| 70歳以上 | 70歳以上かどうか | チェックボックス |
| リスク薬剤 | リスク薬剤の有無 | チェックボックス |
| 認知症 | 認知症の有無 | チェックボックス |
| 脳器質的障害 | 脳器質的障害の有無 | チェックボックス |
| アルコール多飲 | アルコール多飲の有無 | チェックボックス |
| せん妄既往 | せん妄既往の有無 | チェックボックス |
| 全身麻酔 | 全身麻酔の有無 | チェックボックス |
| せん妄ハイリスク | せん妄ハイリスクの有無 | 該当/非該当 |
| AIリスク判定 | リスク評価結果 | 高/低/未実施 |
| ケア実施状況 | ケアプラン実施状況 | 完了/実施中/未実施 |

#### 2.1.2 画面遷移
- 患者の名前を押下すると個別の患者詳細情報ページに遷移する。
- ケア実施状況の項目を押下すると個別のケアプラン一覧に遷移する。

### 2.2 検索機能
以下項目で検索を実施できるようにする（AND条件）

| 項目名 | 説明 | デフォルト値 |
|-------|------|------------|
| リスク評価 | 評価結果 | 指定無し |
| ケア実施状況 | 実施状況 | 指定無し |
| 入院日 | 入院日付。日付範囲指定 | 操作日付の二日前 ~ 操作日付 |
| 評価日 | リスク評価実施日付。日付範囲指定 | |
| 名前 | 部分一致検索 | 無し |

初期表示ではデフォルトの条件でフィルタリングされた一覧が表示されるものとする。

### 2.3 ページネーション機能
１ページに表示する件数を「縦幅から自動計算された件数」、「10件」、「20件」、「50件」から選択できるものとし、ページネーション機能で全件閲覧できるようにする。

### 2.4 操作機能
以下機能のトリガーとなるボタンが配置される。
- 電子カルテ同期
- リスク評価実行
  - 実行権限の制御（医師・看護師長以上のロールに限定）
  - 一括操作時の確認ダイアログ表示


## 制約条件
- 電子カルテシステムとの連携が必要
- 表示データは最新の情報のみ
- 過去のデータは履歴として参照可能

## エラー処理
- データ欠損時の処理
- 表示エラー時の処理
- 電子カルテ同期エラー時の処理
