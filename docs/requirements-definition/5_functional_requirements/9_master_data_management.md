# 9.マスタデータ管理

## 機能概要
システムで使用するマスタデータの管理機能を提供する。
薬剤マスタについてはCSVファイルによる一括インポート機能を備える。

## 前提条件
- 管理者権限を持つユーザーであること

## 機能要件

### 9.1 薬剤マスタ管理機能

#### 9.1.1 薬剤マスタ一覧表示
- リスク薬剤の一覧表示
- 検索機能
- ページネーション機能

#### 9.1.2 薬剤マスタ登録・編集・削除
- リスク薬剤の新規登録
- リスク薬剤の編集
- リスク薬剤の削除

#### 9.1.3 薬剤マスタCSVインポート
管理者がCSVファイルをアップロードし、薬剤マスタを一括更新する機能。
開発チームが更新済みCSVファイルを病院側管理者に提供し、管理者が管理画面からインポートする運用を想定する。

- CSVファイルのアップロード
  - 管理画面からファイルを選択してアップロード
  - CSVファイルのフォーマットバリデーション（必須項目、データ型、文字コード等）
- 差分プレビュー
  - インポート実行前に追加・変更・削除される件数を表示
  - 管理者が内容を確認してからインポートを実行
- インポート実行
  - マスタデータを一括更新
  - インポート処理中のエラー発生時はロールバック

### 9.2 基準値マスタ管理機能

#### 9.2.1 基準値マスタ一覧表示
- バイタルサイン・採血結果の基準値の一覧表示
- 男性・女性・共通の基準値範囲を表示
- 単位の表示・変換係数の管理

#### 9.2.2 基準値マスタ編集
- 基準値の編集（管理者権限が必要）

## 制約条件
- 薬剤マスタのCSVファイルはUTF-8エンコーディングとする
- マスタデータの変更は医療記録として保存

## エラー処理
- CSVフォーマットエラー時の処理
  - 不正なフォーマットの場合、エラー内容と該当行を表示する
- インポートエラー時の処理
  - インポート中にエラーが発生した場合、ロールバックしエラーメッセージを表示する
- 登録・編集エラー時の処理
  - 保存に失敗した場合、エラーメッセージを表示する
