# ADR-0004: フロントエンドUIキット選定（MUI主軸 + ハイブリッド構成）

## ステータス

承認

## コンテキスト

DELISPECTのフロントエンドは現在全面的にMUI（Material UI）で構成されている。

### 現状の課題

1. **デザインの画一化**
   - MUI標準のデザインに依存し、プロダクト固有の表現がしづらい
   - 強調ボタンなど独自演出がMUIの体系を崩すとコスト増になる

2. **MUI固有設計の学習コスト**
   - `sx` / `theme` / `spacing` など独自のスタイリング体系がある

3. **プロダクトの性質**
   - 医療業務用途であり、安定性・視認性・誤操作防止が最優先
   - UI的な演出は必須要件ではない
   - 既存のMUI資産が大きい

### 要件

- 既存MUI資産を活かしつつ、必要箇所で独自のデザイン表現を可能にしたい
- 画面の統一性と保守性を維持し、運用負荷を抑えたい
- 高機能コンポーネント（DataGrid、DatePicker等）を継続利用したい

---

## 検討した選択肢

### 選択肢1: MUI継続（単独）

**概要**:
全面的にMUIを継続利用する。

**メリット**:
- 移行コストがゼロ
- レイアウト・余白・状態設計が標準化されており実装のブレが起きにくい
- DataGrid、DatePicker、Autocomplete等の高機能コンポーネントが充実
- アクセシビリティ・状態管理が整備済み

**デメリット**:
- デザインが画一的になりやすい
- 強調や演出がしづらい
- 深いテーマカスタムは運用複雑化を招く

### 選択肢2: Tailwind + shadcn等への移行

**概要**:
MUIを廃止し、Tailwind CSS + shadcn/uiに全面移行する。

**メリット**:
- デザインの主導権を握れる（強調、アニメーション、情報の強弱設計）
- プロダクト固有のビジュアル表現がしやすい
- shadcnはヘッドレス寄りでカスタマイズ前提

**デメリット**:
- 既存MUI資産の全面書き換えが必要
- 高機能コンポーネント（DataGrid等）を自前で代替する必要がある
- 設計責任がチーム側に寄り、ルールが弱いと統一感が崩れる
- 初期設計コスト（トークン設計・設計規約）が大きい

### 選択肢3: MUI主軸 + ハイブリッド構成

**概要**:
MUIを基盤として継続利用し、独自のデザイン表現が必要な箇所のみTailwind CSS + shadcn/uiを部分的に採用する。

**メリット**:
- 既存MUI資産をそのまま活かせる
- 高機能コンポーネントはMUIを継続活用
- 必要箇所のみ独自表現を導入でき、段階的に適用範囲を広げられる

**デメリット**:
- 2つのスタイリング体系が共存するため、使い分けルールの策定が必要
- styled-componentsの廃止対応が必要（現在GlobalSpinner等で利用中）

---

## 決定

**選択肢3: MUI主軸 + ハイブリッド構成** を採用する。

- 基盤UI・高機能コンポーネント: **MUI**
- 独自デザイン表現が必要な箇所: **Tailwind CSS + shadcn/ui**（部分採用）
- styled-components: **廃止**（優先的に置換して除去）

---

## 理由

### MUI主軸を選んだ理由

1. **医療業務用途の安定性**
   - 安定性・視認性・誤操作防止が最優先であり、MUIの標準化されたUIはこの要件に合致する

2. **高機能コンポーネントの活用**
   - DataGrid、DatePicker、Autocomplete等は自作コストが高く、MUIの継続利用が合理的

3. **既存資産の保全**
   - 全面移行のコストを回避し、既存コードを活かす

### ハイブリッド構成を選んだ理由

1. **表現の柔軟性確保**
   - ブランド体験や強調演出が必要な箇所にTailwind系を限定的に導入できる

2. **段階的な導入が可能**
   - 導入範囲を限定し、実運用で問題がないか確認しながら広げられる

### 選ばなかった選択肢の理由

- **選択肢1（MUI単独）**: 独自表現の課題が解決しない
- **選択肢2（全面移行）**: 既存資産の書き換えコストと高機能コンポーネント代替の負荷が大きい

---

## 影響

### ポジティブな影響

- **安定性維持**: 既存MUI資産と高機能コンポーネントを継続活用
- **表現力向上**: 必要箇所でプロダクト固有のデザイン表現が可能
- **移行コスト最小化**: 全面書き換えを回避

### ネガティブな影響・リスク

| リスク | 対策 |
|--------|------|
| 2つのスタイリング体系の共存による複雑化 | 使い分けルールをコーディングガイドラインに明記する |
| styled-components廃止の移行作業 | 利用箇所が限定的（GlobalSpinner等）のため、優先的に置換する |

### 必要な対応

1. MUIとTailwindの使い分けルールを策定する
2. styled-componentsの利用箇所を洗い出し、置換する
3. Tailwind CSS + shadcn/uiの導入範囲を定義する

---

## 関連情報

- 検討資料: 旧 `docs/design/xx_frontend_ui_kit_consideration.md`（本ADRに集約済み、削除）
- 関連ADR: [ADR-0001](./0001-monorepo-typescript.md) Monorepo + TypeScript統一
